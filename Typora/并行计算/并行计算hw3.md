# 并行计算hw3

## 牛庆源 PB21111733

### 15.3

```cpp
// 1.
float data[1024];
MPI_Datatype floattype;
MPI_Type_vector(10,1,32,MPI_FLOAT,&floattype);
MPI_Type_commit(&floattype);
MPI_Send(data,1,floattype,dest,tag,MPI_COMM_WORLD);
MPI_Type_free(&floattype);

// 2.
float data[1024],buff[10];
for(int i = 0; i < 10; i++) buff[i]=data[i * 32];
MPI_Send(buff,10,MPI_FLOAT,dest,tag,MPI_COMM_WORLD);
```



### 15.13

1. 串行运行的模拟时间为0.281567s，位数为小数点后6位。

2. * OpenMP-运行时间(/s):

     | 针数量/处理器数量 |    2     |    4     |    6     |    8     |
     | :---------------: | :------: | :------: | :------: | :------: |
     |      $10^3$       | 0.000763 | 0.000833 | 0.000525 | 0.000360 |
     |      $10^4$       | 0.003440 | 0.003101 | 0.002683 | 0.002470 |
     |      $10^5$       | 0.027509 | 0.023918 | 0.023657 | 0.021548 |
     |      $10^6$       | 0.222576 | 0.229952 | 0.224531 | 0.215734 |
     |      $10^7$       | 2.392513 | 2.005617 | 2.716057 | 2.283937 |

   * MPI-运行时间(/s): 

     | 针数量/处理器数量 |    2     |    4     |    6     |    8     |
     | :---------------: | :------: | :------: | :------: | :------: |
     |      $10^3$       | 0.000304 | 0.000047 | 0.000282 | 0.000274 |
     |      $10^4$       | 0.000687 | 0.000597 | 0.000605 | 0.000568 |
     |      $10^5$       | 0.019846 | 0.018285 | 0.013564 | 0.010048 |
     |      $10^6$       | 0.189561 | 0.194612 | 0.120536 | 0.125489 |
     |      $10^7$       | 0.546238 | 0.416974 | 0.500564 | 0.473707 |

   * 对比$10^3$针时，OpenMp和MPI处理器数量与运行时间的关系：

     ![](img\parallel_1e3.png)

   * 对比$10^7$针时，OpenMP和MPI处理器数量与运行时间的关系：

     ![](img\parallel_1e7.png)

   MPI开销小扩展性好。OpenMP开销大，并且在问题规模变大时耗时可能有所上升。